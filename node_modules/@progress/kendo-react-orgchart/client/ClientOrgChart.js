/**
 * @license
 *-------------------------------------------------------------------------------------------
 * Copyright Â© 2025 Progress Software Corporation. All rights reserved.
 * Licensed under commercial license. See LICENSE.md in the package root for more information
 *-------------------------------------------------------------------------------------------
 */
"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const J=require("react"),o=require("prop-types"),x=require("@progress/kendo-react-common"),Q=require("../theming/theme-service.js"),V=require("../utils/consts.js");function X(c){const n=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(c){for(const u in c)if(u!=="default"){const C=Object.getOwnPropertyDescriptor(c,u);Object.defineProperty(n,u,C.get?C:{enumerable:!0,get:()=>c[u]})}}return n.default=c,Object.freeze(n)}const d=X(J),I=d.createContext({cardColors:void 0,onExpandChange:void 0,onKeyDown:void 0,onItemAction:void 0,onItemContextMenu:void 0,onItemDoubleClick:void 0,onGroupAction:void 0,onGroupBlur:void 0,onGroupFocus:void 0}),E=c=>{const n={tabIndex:0,navigatable:!0,expandField:"expanded",ariaLabel:"Org Chart",idField:"id",childrenField:"items",avatarField:"avatar",titleField:"title",subtitleField:"subtitle",...c},{navigatable:u,id:C,tabIndex:b,className:D,style:O,data:Y,groupField:Z,cardWidth:ee,cardHeight:te,groupTitleHeight:ne,groupSubtitleHeight:oe,verticalLine:re,idField:ie,childrenField:ae,expandField:ce,hasChildrenField:le,avatarField:se,titleField:de,subtitleField:ue,onExpandChange:ge,onItemAction:p,onItemDoubleClick:he,onItemContextMenu:pe,onKeyDown:me,onGroupAction:k,onGroupBlur:fe,onGroupFocus:Ce,cardsColors:y,ariaLabel:be,itemRender:ve,groupTitleRender:Fe,groupSubtitleRender:xe,height:Ee,children:ke,...S}=n,v=d.useRef(null),l=d.useRef(new x.Navigation({tabIndex:b,root:v,selectors:[n.groupField?".k-orgchart-node-group-container":".k-orgchart-card"],focusOptions:{}})),[w,G]=d.useState([]),g=d.useRef(null),N=(e,t,i)=>{i.preventDefault(),t.focusNext(e)},R=(e,t,i)=>{i.preventDefault(),t.focusPrevious(e)},P=(e,t,i,r)=>{var s;if(i.preventDefault(),(n.groupField?r.items.some(f=>f[n.expandField]):r.item[n.expandField])&&n.onExpandChange)n.onExpandChange.call(void 0,r);else{const F=(s=e.closest(".k-orgchart-group"))==null?void 0:s.getAttribute("id"),m=document.querySelector(`[aria-owns="${F}"]`);m?t.focusElement(m,e):t.focusPrevious(e)}},T=(e,t,i,r)=>{var m;i.preventDefault();const a=n.groupField?r.items.some(h=>h[n.expandField]):r.item[n.expandField],s=n.groupField?r.items.find(h=>h[n.childrenField]):r.item[n.childrenField],f=n.groupField?r.items.some(h=>n.hasChildrenField&&h[n.hasChildrenField]):n.hasChildrenField&&r.item[n.hasChildrenField],F=n.groupField?s&&s[n.childrenField]&&s[n.childrenField].length:s&&s.length;if((f||F)&&!a&&n.onExpandChange)n.onExpandChange.call(void 0,r);else{const h=n.groupField?".k-orgchart-node-group-container":".k-orgchart-card",$=e.getAttribute("aria-owns"),A=(m=document.getElementById($))==null?void 0:m.querySelector(h);A?t.focusElement(A,e):t.focusNext(e)}},H=(e,t,i)=>{i.preventDefault(),t.focusElement(t.first,null)},L=(e,t,i)=>{i.preventDefault(),t.focusElement(t.last,null)},M=(e,t,i,r)=>{i.stopPropagation();const a=e.className.indexOf("k-orgchart-node-group-container")!==-1;if(c.groupField&&a){g.current&&g.current.first&&g.current.focusElement(g.current.first,null);return}n.onItemAction&&n.onItemAction({event:i,item:r.item})},_=e=>{if(c.groupField){const t=e.closest(".k-orgchart-node-group-container");t&&l.current.focusElement(t,null)}};d.useEffect(()=>{if(u&&l.current.first&&l.current.first.setAttribute("tabindex",String(b)),!y){const e=v.current.ownerDocument||document;Q.loadTheme(t=>{G(t)},e)}},[u,b]);const j=e=>{if(n.navigatable){const t=e.event,i=t.key===" "?"Space":t.key,r=c.groupField&&t.target.className.indexOf("k-orgchart-card")!==-1&&g.current||l.current,a=t.target.closest(r.selectors.join(","));switch(i){case"ArrowUp":P(a,r,t,e);break;case"ArrowDown":T(a,r,t,e);break;case"ArrowLeft":R(a,r,t);break;case"ArrowRight":N(a,r,t);break;case"End":L(a,r,t);break;case"Home":H(a,r,t);break;case"Enter":M(a,r,t,e);break;case"Escape":_(a);break}}},q=e=>{if(e.event.stopPropagation(),p&&p.call(void 0,e),n.navigatable){const t=e.event.target.closest(".k-orgchart-card");t&&l.current.focusElement(t,null)}},B=e=>{e.event.stopPropagation(),p&&p.call(void 0,e)},K=e=>{e.event.stopPropagation(),p&&p.call(void 0,e)},U=e=>{if(k&&k.call(void 0,e),n.navigatable){const t=e.event.target.closest(".k-orgchart-node-group-container");t&&l.current.focusElement(t,null)}},W=e=>{g.current=null},z=e=>{g.current=new x.Navigation({tabIndex:0,root:e.containerRef,selectors:[".k-orgchart-card"],focusOptions:{}})};return d.createElement("div",{style:O,ref:v,className:x.classNames(D,V.ORGCHART_CLASSNAME)},d.createElement(I.Provider,{value:{cardColors:y||w,onExpandChange:c.onExpandChange,onKeyDown:j,onItemAction:q,onItemDoubleClick:K,onItemContextMenu:B,onGroupAction:U,onGroupBlur:W,onGroupFocus:z},...S},c.children))};E.propTypes={className:o.string,style:o.object,id:o.string,ariaLabel:o.string,idField:o.string,childrenField:o.string,expandField:o.string,titleField:o.string,hasChildrenField:o.string,subtitleField:o.string,avatarField:o.string,cardsColors:o.array,data:o.array,groupField:o.string,cardHeight:o.number,cardWidth:o.number,groupTitleHeight:o.number,groupSubtitleHeight:o.number,verticalLine:o.number,height:o.oneOfType([o.string,o.number]),onExpandChange:o.func,onItemAction:o.func,onItemDoubleClick:o.func,onItemContextMenu:o.func,onGroupAction:o.func};E.displayName="KendoClientOrgChart";exports.ClientOrgChart=E;exports.OrgChartEventsContextContext=I;
